<!DOCTYPE html>
<html lang="en">
    <%- include('../components/head')%>
<body>
      <div class="grid-container">
        <!-- Header -->
        <%- include('../components/header') %>
        <!-- End Header -->
        <!-- Sidebar -->
        <%- include('../components/sidebar') %>
        <!-- End Sidebar -->
        <main class="main-container">
            <div class="main-title">
              <p class="font-weight-bold">Panel administrativo de las Entradas</p>
            </div>
    
            <div class="main-cards">
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">El campo codigo automovil es requerido [Las 2 primeras letras de marca + los cuatro numeros del año + el modelo]</p>
                </div>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">El campo codigo entrada es requerido [Las 4 primeras letras del producto + las 2 primeras letras de marca + los cuatro numeros del año + el modelo]</p>
                </div>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">Ordenes de venta</p>
                  <span class="material-icons-outlined text-green">shopping_cart</span>
                </div>
                <span class="text-primary font-weight-bold">79</span>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">INVENTORY ALERTS</p>
                  <span class="material-icons-outlined text-red">notification_important</span>
                </div>
                <span class="text-primary font-weight-bold">56</span>
              </div>
            </div>
    
          <div class="cards form-container">
            <label for="inputPassword5" class="form-label">Producto</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Stock</label>
            <input type="number" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            
            
            <label for="inputPassword5" class="form-label">Codigo Modelo</label>
            <select class="form-select form-select-sm form-control" aria-label=".form-select-sm example">
          
              <% codesA.forEach((codeM) => { %>
                  
                  <option value="<%= codeM.codeAuto %>"><%= codeM.codeAuto %></option>
                <% }) %>
            </select>
           
            <label for="inputPassword5" class="form-label">RFC proveedor</label>
            <select class="form-select form-select-sm form-control" aria-label=".form-select-sm example">
          
              <% rfc.forEach((code) => { %>
                  
                  <option value="<%= code.RfcProveedor %>"><%= code.RfcProveedor %></option>
                <% }) %>
            </select>
            <label for="inputPassword5" class="form-label">Codigo Autoparte</label>
            <select class="form-select form-select-sm form-control" aria-label=".form-select-sm example">
          
              <% autoparte.forEach((auto) => { %>
                  
                  <option value="<%= auto.code_autoparte %>"><%= auto.code_autoparte %></option>
                <% }) %>
            </select>

            <label for="inputPassword5" class="form-label">Precio</label>
            <input type="number" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
    
            <div class="d-grid gap-2">
              <a href="" class="btn btn-dark agregar" type="submit">Agregar</a>
            </div>
          </div>
    
          <div class="cards">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Producto</th>
                  <th scope="col">Stock</th>
                  <th scope="col">Codigo Automovil</th>
                  <th scope="col">RFC proveedor</th>
                  <th scope="col">Codigo Autoparte</th>
                  <th scope="col">Precio</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                <% entradas.forEach(entrada => { %>
                  <tr>
                  <td><%=entrada.nombreAutoparte%></td>
                  <td><%=entrada.stock%></td>
                  <td><%= entrada.ModeloCodeAuto %></td>
                  <td><%= entrada.ProveedorRfcProveedor %></td>
                  <td><%=entrada.AutoparteCodeAutoparte%></td>
                  <td><%=entrada.precio%></td>
                  <td><a href="https://digilist.fly.dev/digilist/web-eliminar-entradas?idEntradas=<%=entrada.idEntradas %>" class="btn btn-dark" >Eliminar</a></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        </main>
      </div>
      <!-- Scripts -->
      <script defer>
        const [nom, stk,codeA,Rfc,codeE, prec] = document.querySelectorAll('.form-control');
        document.querySelector('.form-container').addEventListener('input', e => {
          if(e.target.className === 'form-control') {
            
            document.querySelectorAll('.btn')[0].href= `https://digilist.fly.dev/digilist/web-registro-entradas?nombreAutoparte=${nom.value}&stock=${stk.value}&ModeloCodeAuto=${codeA.value}&ProveedorRfcProveedor=${Rfc.value}&AutoparteCodeAutoparte=${codeE.value}&precio=${prec.value}` 
          }
        });       
      </script>
      <!-- ApexCharts -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
      <!-- Custom JS -->
      <script src="../../public/js/sidebar.js"></script>
    </body>
</body>

</html>