<!DOCTYPE html>
<html lang="en">
    <%- include('../components/head')%>
<body>
      <div class="grid-container">
        <!-- Header -->
        <%- include('../components/header') %>
        <!-- End Header -->
        <!-- Sidebar -->
        <%- include('../components/sidebar') %>
        <!-- End Sidebar -->
        <main class="main-container">
            <div class="main-title">
              <p class="font-weight-bold">Panel administrativo de los Envios</p>
            </div>
    
<!--             <div class="main-cards">
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">Productos</p>
                  <span class="material-icons-outlined text-blue">inventory_2</span>
                </div>
                <span class="text-primary font-weight-bold">249</span>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">Ordenes de compra</p>
                  <span class="material-icons-outlined text-orange">add_shopping_cart</span>
                </div>
                <span class="text-primary font-weight-bold">83</span>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">Ordenes de venta</p>
                  <span class="material-icons-outlined text-green">shopping_cart</span>
                </div>
                <span class="text-primary font-weight-bold">79</span>
              </div>
    
              <div class="card">
                <div class="card-inner">
                  <p class="text-primary">INVENTORY ALERTS</p>
                  <span class="material-icons-outlined text-red">notification_important</span>
                </div>
                <span class="text-primary font-weight-bold">56</span>
              </div>
            </div> -->
    
          <div class="cards form-container">
            <label for="inputPassword5" class="form-label">Codigo</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Direccion</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Descripcion</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Fecha de Entrega</label>
            <input type="tel" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Estado Paquete</label>
            <select class="form-select form-select-sm form-control" aria-label=".form-select-sm example">
              <option value="Preparacion">Preparaci√≥n</option>
              <option value="Pendiente">Pendiente</option>
              <option value="Entregado">Entregado</option>
              <option value="Cancelado">Cancelado</option>
            </select>
            <label for="inputPassword5" class="form-label">Email Usuario</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
            <label for="inputPassword5" class="form-label">Folio del Redecibo</label>
            <input type="text" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock">
            <div id="passwordHelpBlock" class="form-text">
            </div>
    
            <div class="d-grid gap-2">
              <a href="" class="btn btn-dark agregar" type="submit">Agregar</a>
            </div>
          </div>
    
          <div class="cards">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Codigo Envio</th>
                  <th scope="col">Direccion</th>
                  <th scope="col">Descripcion</th>
                  <th scope="col">Fecha de Entrega</th>
                  <th scope="col">Estado Paquete</th>
                  <th scope="col">Fecha de compra</th>
                  <th scope="col">Email Usuario</th>
                  <th scope="col">Folio del Recibo</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                  <% envios.forEach(envio => { %>
                    <tr>
                    <td><%=envio.codEnvio%></td>
                    <td><%=envio.direccion%></td>
                    <td><%=envio.description%></td>
                    <td><%=envio.fechaEntrega%></td>
                    <td><%=envio.EstadoPaquete%></td>
                    <td><%=envio.fechaRegistroEnvio%></td>
                    <td><%=envio.UsuarioEmail%></td>
                    <td><%=envio.ReciboFolio%></td>
                    <td><a href="https://digilist.fly.dev/digilist/web-eliminar-envios?codEnvio=<%=envio.codEnvio %>"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a></td>
                    </tr>
                  <% }) %>
              </tbody>
            </table>
          </div>
        </main>
      </div>
      <!-- Scripts -->
      <script defer>
      const [code, dir, des, entrega, estado,email,folio] = document.querySelectorAll('.form-control');
      document.querySelector('.form-container').addEventListener('input', e => {
        if (e.target.className === 'form-control') {
          
          document.querySelectorAll('.btn')[0].href = `http://localhost:4000/digilist/web-registro-envios?codEnvio=${code.value}&direccion=${dir.value}&description=${des.value}&fechaEntrega=${entrega.value}&EstadoPaquete=${estado.value}&UsuarioEmail=${email.value}&ReciboFolio=${folio.value}`
        }
      });        
      </script>
      <!-- ApexCharts -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
      <!-- Custom JS -->
      <script src="../../public/js/sidebar.js"></script>
</body>
</html>